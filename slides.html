<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Tidy Geospatial Networks in R</title>
    <meta charset="utf-8" />
    <meta name="author" content="Lucas van der Meer, Lorena Abad, Andrea Gilardi, Robin Lovelace" />
    <script src="libs/header-attrs-2.2/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Tidy Geospatial Networks in R
## Introducing the <code>sfnetworks</code> package
### Lucas van der Meer, Lorena Abad, Andrea Gilardi, Robin Lovelace
### 2020-06-16 (updated: 2020-06-16)

---

class: center, middle






&lt;STYLE type='text/css' scoped&gt;
PRE.fansi SPAN {padding-top: .25em; padding-bottom: .25em};
&lt;/STYLE&gt;



## Hello from the team!
.center[
![:scale 20%](https://avatars1.githubusercontent.com/u/26540305?s=400&amp;u=c576e87314499815cbf698b7781ee58fd1d773e2&amp;v=4)
![:scale 20%](https://pbs.twimg.com/profile_images/1107610946623754240/BaNA8k1E_400x400.png)
![:scale 20%](https://avatars1.githubusercontent.com/u/22221146?s=400&amp;u=3683a04d3f40823162d6c1ae5c51b6c9a5c0a9a5&amp;v=4)
![:scale 20%](https://avatars2.githubusercontent.com/u/10034237?s=460&amp;u=53193bed2fad4f0808b55a227f99897a8d63ebc2&amp;v=4)
]
--
.center[
what brought us together?
]
---
class: center, middle

## Geospatial Networks

--
.pull-left[
Road networks
![](figs/road_network.png)
]

--
.pull-right[
River networks
![](figs/river_network.png)
]

--

[**spnethack**](https://github.com/sfnetworks/spnethack) organised in Munster, 2019

Building on Luuk's MSc project while Robin was visiting [ifgi](https://www.uni-muenster.de/Geoinformatics/en/) 

Result: [Spatial networks in R with sf and tidygraph](https://www.r-spatial.org/r/2019/09/26/spatial-networks.html) blog post

---

.pull-left-30[
## Geospatial in R

- [\#rspatial](https://twitter.com/search?q=%23rspatial)
- `sf`
- `stars`
- `rgeos`
- `rgdal`
- `tmap`
- `ggmap`
- `mapview`
- ...

]


.pull-right-70[
&lt;img src="slides_files/figure-html/geospatial_r-1.png" width="100%" /&gt;

]
---

.pull-left-30[
## Networks in R

- [statnet](http://statnet.org/)
- `igraph`
- `tidygraph`
- `qgraph`
- `ggraph`
- `visNetwork`
- `networkD3`
- ...
]

.pull-right-70[
&lt;img src="slides_files/figure-html/network_ex-1.png" width="90%" /&gt;
]

---
class: center, middle

# then...

## why a new package?

---

.center[
## why a new package?

[![](figs/so_q1.png)](https://stackoverflow.com/questions/57833905/how-to-convert-a-list-of-sf-spatial-points-into-a-routable-graph)

]

---

.center[
## why a new package?

[![:scale 80%](figs/gh_q1.png)](https://github.com/r-spatial/sf/issues/966)
]

---

.center[
## why a new package?

[![](figs/gh_c1.png)](https://github.com/r-spatial/sf/issues/790#issuecomment-403831517)
]

---
class: center
## why a new package?

&lt;center&gt;&lt;blockquote class="twitter-tweet"&gt;&lt;p lang="en" dir="ltr"&gt;One of the biggest reasons we still have ArcGIS licenses is for Network Analysis (drive times, service areas etc). Does anyone have &lt;a href="https://twitter.com/hashtag/foss4g?src=hash&amp;amp;ref_src=twsrc%5Etfw"&gt;#foss4g&lt;/a&gt; tools for this they like? Last time we tried pgRouting (yrs ago) it didn&amp;#39;t feel fully formed yet, &lt;a href="https://twitter.com/hashtag/gischat?src=hash&amp;amp;ref_src=twsrc%5Etfw"&gt;#gischat&lt;/a&gt;&lt;/p&gt;&amp;mdash; Zev Ross (@zevross) &lt;a href="https://twitter.com/zevross/status/1089908839816794118?ref_src=twsrc%5Etfw"&gt;January 28, 2019&lt;/a&gt;&lt;/blockquote&gt;&lt;/center&gt; &lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;

--

...

because open source can always get better!

---
class: center, middle

## What is out there already?

[dodgr](https://atfutures.github.io/dodgr/) 

[cppRouting](https://github.com/vlarmet/cppRouting)

[shp2graph](https://r-forge.r-project.org/projects/shp2graph)

[spnetwork](https://github.com/edzer/spnetwork)

[stplanr](https://docs.ropensci.org/stplanr/)

...

---
class: center, middle

## What do we propose?

--
.pull-left[
![](https://user-images.githubusercontent.com/520851/34887433-ce1d130e-f7c6-11e7-83fc-d60ad4fae6bd.gif)
]

--

.pull-right[
![:scale 38%](https://raw.githubusercontent.com/thomasp85/tidygraph/master/man/figures/logo.png)
]
--

## `sfnetworks`

The best of both worlds!
---
class: middle

.pull-left-70[
.center[
![:scale 80%](https://github.com/allisonhorst/stats-illustrations/raw/master/rstats-artwork/tidyverse_celestial.png)
]
.footnote[
Artwork by [@allison_horst](https://twitter.com/allison_horst)
]
]

.pull-right-30[
### *tidy* workflows
&gt; In tidy data:
1. Each variable forms a column.
2. Each observation forms a row.
3. Each type of observational unit forms a table.

.footnote[
Wickham, H. (2014). Tidy Data. Journal of Statistical Software, 59(10), 1 - 23. doi:http://dx.doi.org/10.18637/jss.v059.i10
]

- Supported by the *tidyverse*

- Allows piping `%&gt;%` structures 

]

---
class: center, middle

.pull-left-70[
![](https://github.com/allisonhorst/stats-illustrations/raw/master/rstats-artwork/sf.png)
.footnote[
Artwork by [@allison_horst](https://twitter.com/allison_horst)
]
]

.pull-right-30[

### **`sf` package**

Simple features for R

Spatial vector data (points, lines and polygons)

Compatible with *tidy* workflows

S3 classes
]
---
class: center, middle

.pull-left-70[
![:scale 80%](https://www.r-graph-gallery.com/339-circular-dendrogram-with-ggraph_files/figure-html/thecode8-1.png)
.footnote[
Plot from [R GRaph Gallery](https://www.r-graph-gallery.com/339-circular-dendrogram-with-ggraph.html)
]
]

.pull-right-30[

### **`tidygraph` package**
![:scale 10%](https://avatars3.githubusercontent.com/u/3735184?s=200&amp;v=4)
 Interfaces with [`igraph`](https://igraph.org/r/)  
 
![:scale 8%](https://github.com/tidyverse/dplyr/raw/master/man/figures/logo.png)
 Supports [`dplyr`](https://dplyr.tidyverse.org/) *verbs* 

![:scale 8%](https://raw.githubusercontent.com/thomasp85/tidygraph/master/man/figures/logo.png)
 Introduces new *verbs* specific to network data (e.g. `morph`, `bind_graphs`, `graph_join`)

![:scale 8%](https://github.com/thomasp85/ggraph/raw/master/man/figures/logo.png)
 Allows network visualization via [`ggraph`](https://ggraph.data-imaginist.com/)
]

---
class: center, middle

## So, let's dive in...

---
### Installation 

Install the more stable master branch with:


```r
remotes::install_github("luukvdmeer/sfnetworks")
```

Install the develop branch, where most of the development takes place and where PRs should be directed:


```r
remotes::install_github("luukvdmeer/sfnetworks", ref = "develop")
```

---
## `sfnetwork` data structure

### Philosophy

--

&gt; "... a close approximation of tidyness for relational data is two tidy data frames, one describing the node data and one describing the edge data."

`tidygraph` introduction.

--

&lt;br&gt;
&lt;br&gt;

&gt; “A close approximation of tidyness for relational .orange[*geospatial data*] is two .orange[*sf objects*], one describing the node data and one describing the edge data.”

`sfnetworks` adaption.

---
## `sfnetwork` data structure

### Construction

- Nodes: `sf` object with `POINT` geometries

- Edges: *to* and *from* column with end-points

   + spatially explicit: `sf` object with `LINESTRING` geometries

   + spatially implicit: `data.frame` or `tibble` object

- Same CRS!

---
class: split-40
count: false
 

.left-panel-toyexample-user[

```r
*p1 = st_point(c(7, 51))
*p2 = st_point(c(7, 52))
*p3 = st_point(c(8, 52))

*st_sfc(
*   p1, p2, p3,
*   crs = 4326
* ) %&gt;% st_sf()
```
]
 
.right-panel-toyexample-user[

```
Simple feature collection with 3 features and 0 fields
geometry type:  POINT
dimension:      XY
bbox:           xmin: 7 ymin: 51 xmax: 8 ymax: 52
geographic CRS: WGS 84
      geometry
1 POINT (7 51)
2 POINT (7 52)
3 POINT (8 52)
```
]

---
class: split-40
count: false
 

.left-panel-toyexample-user[

```r
p1 = st_point(c(7, 51))  
p2 = st_point(c(7, 52))  
p3 = st_point(c(8, 52))  

st_sfc(  
    p1, p2, p3,  
    crs = 4326  
  ) %&gt;% st_sf() -&gt;  
* nodes
```
]
 
.right-panel-toyexample-user[

]

---
class: split-40
count: false
 

.left-panel-toyexample-user[

```r
p1 = st_point(c(7, 51))  
p2 = st_point(c(7, 52))  
p3 = st_point(c(8, 52))  

st_sfc(  
    p1, p2, p3,  
    crs = 4326  
  ) %&gt;% st_sf() -&gt;  
  nodes  

*st_sfc(
* st_cast(st_union(p1,p2), "LINESTRING"),
* st_cast(st_union(p1,p3), "LINESTRING"),
* st_cast(st_union(p2,p3), "LINESTRING"),
* crs = 4326
*) %&gt;% st_sf()
```
]
 
.right-panel-toyexample-user[

```
Simple feature collection with 3 features and 0 fields
geometry type:  LINESTRING
dimension:      XY
bbox:           xmin: 7 ymin: 51 xmax: 8 ymax: 52
geographic CRS: WGS 84
                 geometry
1 LINESTRING (7 51, 7 52)
2 LINESTRING (7 51, 8 52)
3 LINESTRING (7 52, 8 52)
```
]

---
class: split-40
count: false
 

.left-panel-toyexample-user[

```r
p1 = st_point(c(7, 51))  
p2 = st_point(c(7, 52))  
p3 = st_point(c(8, 52))  

st_sfc(  
    p1, p2, p3,  
    crs = 4326  
  ) %&gt;% st_sf() -&gt;  
  nodes  

st_sfc(  
  st_cast(st_union(p1,p2), "LINESTRING"),  
  st_cast(st_union(p1,p3), "LINESTRING"),  
  st_cast(st_union(p2,p3), "LINESTRING"),  
  crs = 4326  
) %&gt;% st_sf() -&gt;  
* edges
```
]
 
.right-panel-toyexample-user[

]

---
class: split-40
count: false
 

.left-panel-toyexample-user[

```r
p1 = st_point(c(7, 51))  
p2 = st_point(c(7, 52))  
p3 = st_point(c(8, 52))  

st_sfc(  
    p1, p2, p3,  
    crs = 4326  
  ) %&gt;% st_sf() -&gt;  
  nodes  

st_sfc(  
  st_cast(st_union(p1,p2), "LINESTRING"),  
  st_cast(st_union(p1,p3), "LINESTRING"),  
  st_cast(st_union(p2,p3), "LINESTRING"),  
  crs = 4326  
) %&gt;% st_sf() -&gt;  
  edges  

*edges$from = c(1, 1, 2)
*edges$to = c(2, 3, 3)
```
]
 
.right-panel-toyexample-user[

]

---
class: split-40
count: false
 

.left-panel-toyexample-user[

```r
p1 = st_point(c(7, 51))  
p2 = st_point(c(7, 52))  
p3 = st_point(c(8, 52))  

st_sfc(  
    p1, p2, p3,  
    crs = 4326  
  ) %&gt;% st_sf() -&gt;  
  nodes  

st_sfc(  
  st_cast(st_union(p1,p2), "LINESTRING"),  
  st_cast(st_union(p1,p3), "LINESTRING"),  
  st_cast(st_union(p2,p3), "LINESTRING"),  
  crs = 4326  
) %&gt;% st_sf() -&gt;  
  edges  

edges$from = c(1, 1, 2)  
edges$to = c(2, 3, 3)  

*sfnetwork(nodes, edges, directed = FALSE)
```
]
 
.right-panel-toyexample-user[

```
Checking validity of network structure... Use force=TRUE to force construction without checks
```

&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# An sfnetwork with&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;nodes and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;edges
#
# CRS: &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;EPSG:4326&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;
#
# An undirected simple graph with 1 component with spatially explicit edges
#
# Node Data:     3 x 1 (active)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: POINT&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7 ymin: 51 xmax: 8 ymax: 52&lt;/span&gt;&lt;span&gt;
     geometry
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;      (7 51)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;      (7 52)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;      (8 52)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Edge Data:     3 x 3&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: LINESTRING&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7 ymin: 51 xmax: 8 ymax: 52&lt;/span&gt;&lt;span&gt;
   from    to         geometry
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;LINESTRING [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     1     2     (7 51, 7 52)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     1     3     (7 51, 8 52)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     2     3     (7 52, 8 52)
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

&lt;style&gt;
.left-panel-toyexample-user {
  color: #777;
  width: 38%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-toyexample-user {
  width: 60%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-toyexample-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---
## `sfnetwork` data structure

### Foreign objects

To convert foreign objects into an `sfnetwork` with `as_sfnetwork`, there are two conditions:

- Object is or can be converted to a `tbl_graph`

- At least the nodes can be converted to an `sf` object

--

Or just an `sf` object with `POINT` or `LINESTRING` geometry

---

class: split-40
count: false
 

.left-panel-object1-user[

```r
*roxel
```
]
 
.right-panel-object1-user[

```
Simple feature collection with 851 features and 2 fields
geometry type:  LINESTRING
dimension:      XY
bbox:           xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax: 51.9612
geographic CRS: WGS 84
# A tibble: 851 x 3
   name          type                                         geometry
   &lt;fct&gt;         &lt;fct&gt;                                &lt;LINESTRING [°]&gt;
 1 Havixbecker ~ residen~       (7.533722 51.95556, 7.533461 51.95576)
 2 Pienersallee  seconda~ (7.532442 51.95422, 7.53236 51.95377, 7.532~
 3 Schulte-Bern~ residen~ (7.532709 51.95209, 7.532823 51.95239, 7.53~
 4 &lt;NA&gt;          path     (7.540063 51.94468, 7.539696 51.94479, 7.53~
 5 Welsingheide  residen~        (7.537673 51.9475, 7.537614 51.94562)
 6 &lt;NA&gt;          footway  (7.543791 51.94733, 7.54369 51.94686, 7.543~
 7 &lt;NA&gt;          footway         (7.54012 51.94478, 7.539931 51.94514)
 8 &lt;NA&gt;          path     (7.53822 51.94546, 7.538131 51.94549, 7.538~
 9 &lt;NA&gt;          track    (7.540063 51.94468, 7.540338 51.94468, 7.54~
10 &lt;NA&gt;          track    (7.5424 51.94599, 7.54205 51.94629, 7.54196~
# ... with 841 more rows
```
]

---
class: split-40
count: false
 

.left-panel-object1-user[

```r
roxel %&gt;%  
* as_sfnetwork()
```
]
 
.right-panel-object1-user[

```
# An sfnetwork with 701 nodes and 851 edges
#
# CRS:  EPSG:4326 
#
# A directed multigraph with 14 components with spatially explicit edges
#
# Node Data:     701 x 1 (active)
# Geometry type: POINT
# Dimension:     XY
# Bounding box:  xmin: 7.522622 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612
             geometry
          &lt;POINT [°]&gt;
1 (7.533722 51.95556)
2 (7.533461 51.95576)
3 (7.532442 51.95422)
4  (7.53209 51.95328)
5 (7.532709 51.95209)
6 (7.532869 51.95257)
# ... with 695 more rows
#
# Edge Data:     851 x 5
# Geometry type: LINESTRING
# Dimension:     XY
# Bounding box:  xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612
   from    to name        type                                geometry
  &lt;int&gt; &lt;int&gt; &lt;fct&gt;       &lt;fct&gt;                       &lt;LINESTRING [°]&gt;
1     1     2 Havixbecke~ reside~ (7.533722 51.95556, 7.533461 51.955~
2     3     4 Pienersall~ second~ (7.532442 51.95422, 7.53236 51.9537~
3     5     6 Schulte-Be~ reside~ (7.532709 51.95209, 7.532823 51.952~
# ... with 848 more rows
```
]

---
class: split-40
count: false
 

.left-panel-object1-user[

```r
roxel %&gt;%  
  as_sfnetwork() -&gt;  
* net
```
]
 
.right-panel-object1-user[

]

&lt;style&gt;
.left-panel-object1-user {
  color: #777;
  width: 38%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-object1-user {
  width: 60%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-object1-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

class: split-40
count: false
 

.left-panel-object2-user[

```r
*net %&gt;%
* st_crs()
```
]
 
.right-panel-object2-user[

```
Coordinate Reference System:
  User input: EPSG:4326 
  wkt:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["geodetic latitude (Lat)",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["geodetic longitude (Lon)",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    USAGE[
        SCOPE["unknown"],
        AREA["World"],
        BBOX[-90,-180,90,180]],
    ID["EPSG",4326]]
```
]

---
class: split-40
count: false
 

.left-panel-object2-user[

```r
net %&gt;%  
  st_crs()  

*net %&gt;%
* st_transform(3035)
```
]
 
.right-panel-object2-user[

```
Coordinate Reference System:
  User input: EPSG:4326 
  wkt:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["geodetic latitude (Lat)",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["geodetic longitude (Lon)",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    USAGE[
        SCOPE["unknown"],
        AREA["World"],
        BBOX[-90,-180,90,180]],
    ID["EPSG",4326]]
```

```
# An sfnetwork with 701 nodes and 851 edges
#
# CRS:  EPSG:3035 
#
# A directed multigraph with 14 components with spatially explicit edges
#
# Node Data:     701 x 1 (active)
# Geometry type: POINT
# Dimension:     XY
# Bounding box:  xmin: 4150707 ymin: 3206375 xmax: 4152367 ymax:
#   3208565
           geometry
        &lt;POINT [m]&gt;
1 (4151491 3207923)
2 (4151474 3207946)
3 (4151398 3207777)
4 (4151370 3207673)
5 (4151408 3207539)
6 (4151421 3207592)
# ... with 695 more rows
#
# Edge Data:     851 x 5
# Geometry type: LINESTRING
# Dimension:     XY
# Bounding box:  xmin: 4150707 ymin: 3206375 xmax: 4152367 ymax:
#   3208565
   from    to name         type                               geometry
  &lt;int&gt; &lt;int&gt; &lt;fct&gt;        &lt;fct&gt;                      &lt;LINESTRING [m]&gt;
1     1     2 Havixbecker~ reside~  (4151491 3207923, 4151474 3207946)
2     3     4 Pienersallee second~ (4151398 3207777, 4151390 3207727,~
3     5     6 Schulte-Ber~ reside~ (4151408 3207539, 4151417 3207573,~
# ... with 848 more rows
```
]

&lt;style&gt;
.left-panel-object2-user {
  color: #777;
  width: 38%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-object2-user {
  width: 60%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-object2-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

class: split-40
count: false
 

.left-panel-object4-user[

```r
*net %&gt;%
* sf_attr("sf_column", "nodes")
```
]
 
.right-panel-object4-user[

```
[1] "geometry"
```
]

---
class: split-40
count: false
 

.left-panel-object4-user[

```r
net %&gt;%  
  sf_attr("sf_column", "nodes")  

*net %&gt;%
* sf_attr("agr", "edges")  # BREAK
```
]
 
.right-panel-object4-user[

```
[1] "geometry"
```

```
from   to name type 
&lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; 
Levels: constant aggregate identity
```
]

&lt;style&gt;
.left-panel-object4-user {
  color: #777;
  width: 38%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-object4-user {
  width: 60%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-object4-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

class: split-40
count: false
 

.left-panel-object5-user[

```r
*par(mar = c(1, 1, 1, 1), bg = NA)
*plot(net)
```
]
 
.right-panel-object5-user[
&lt;img src="slides_files/figure-html/object5_user_1_output-1.png" width="432" /&gt;
]

---
class: split-40
count: false
 

.left-panel-object5-user[

```r
par(mar = c(1, 1, 1, 1), bg = NA)  
plot(net)  

*net %&gt;%
* class()
```
]
 
.right-panel-object5-user[
&lt;img src="slides_files/figure-html/object5_user_2_output-1.png" width="432" /&gt;

```
[1] "sfnetwork" "tbl_graph" "igraph"   
```
]

&lt;style&gt;
.left-panel-object5-user {
  color: #777;
  width: 38%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-object5-user {
  width: 60%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-object5-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

.pull-left-30[
## Graph operations

`sfnetwork` objects subclass `tbl_graph` objects, so any `igraph` algorithm and tidy wrappers from `tidygraph` are supported. 

Check out the possibilities on the [tidygraph introduction](https://www.data-imaginist.com/2017/introducing-tidygraph/).
]

.pull-right-70[
&lt;img src="slides_files/figure-html/unnamed-chunk-4-1.png" width="100%" /&gt;

]
---

class: split-40
count: false
 

.left-panel-sfnetworks_options-non_seq[

```r
roxel %&gt;%  
  as_sfnetwork(  
  )  
```
]
 
.right-panel-sfnetworks_options-non_seq[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# An sfnetwork with&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;701&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;nodes and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;851&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;edges
#
# CRS: &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;EPSG:4326&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;
#
# A directed multigraph with 14 components with spatially explicit edges
#
# Node Data:     701 x 1 (active)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: POINT&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522622 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
             geometry
          &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt; (7.533722 51.95556)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt; (7.533461 51.95576)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt; (7.532442 51.95422)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;4&lt;/span&gt;&lt;span&gt;  (7.53209 51.95328)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;5&lt;/span&gt;&lt;span&gt; (7.532709 51.95209)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;6&lt;/span&gt;&lt;span&gt; (7.532869 51.95257)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 695 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Edge Data:     851 x 5&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: LINESTRING&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
   from    to name        type                                geometry
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;                       &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;LINESTRING [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     1     2 Havixbecke~ reside~ (7.533722 51.95556, 7.533461 51.955~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     3     4 Pienersall~ second~ (7.532442 51.95422, 7.53236 51.9537~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     5     6 Schulte-Be~ reside~ (7.532709 51.95209, 7.532823 51.952~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 848 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

---
class: split-40
count: false
 

.left-panel-sfnetworks_options-non_seq[

```r
roxel %&gt;%  
  as_sfnetwork(  
*   directed = F,
  )  
```
]
 
.right-panel-sfnetworks_options-non_seq[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# An sfnetwork with&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;701&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;nodes and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;851&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;edges
#
# CRS: &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;EPSG:4326&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;
#
# An undirected multigraph with 14 components with spatially explicit edges
#
# Node Data:     701 x 1 (active)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: POINT&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522622 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
             geometry
          &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt; (7.533722 51.95556)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt; (7.533461 51.95576)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt; (7.532442 51.95422)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;4&lt;/span&gt;&lt;span&gt;  (7.53209 51.95328)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;5&lt;/span&gt;&lt;span&gt; (7.532709 51.95209)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;6&lt;/span&gt;&lt;span&gt; (7.532869 51.95257)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 695 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Edge Data:     851 x 5&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: LINESTRING&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
   from    to name        type                                geometry
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;                       &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;LINESTRING [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     1     2 Havixbecke~ reside~ (7.533722 51.95556, 7.533461 51.955~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     3     4 Pienersall~ second~ (7.532442 51.95422, 7.53236 51.9537~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     5     6 Schulte-Be~ reside~ (7.532709 51.95209, 7.532823 51.952~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 848 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

---
class: split-40
count: false
 

.left-panel-sfnetworks_options-non_seq[

```r
roxel %&gt;%  
  as_sfnetwork(  
    directed = F,  
*   edges_as_lines = F
  )  
```
]
 
.right-panel-sfnetworks_options-non_seq[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# An sfnetwork with&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;701&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;nodes and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;851&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;edges
#
# CRS: &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;EPSG:4326&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;
#
# An undirected multigraph with 14 components with spatially implicit edges
#
# Node Data:     701 x 1 (active)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: POINT&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522622 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
             geometry
          &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt; (7.533722 51.95556)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt; (7.533461 51.95576)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt; (7.532442 51.95422)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;4&lt;/span&gt;&lt;span&gt;  (7.53209 51.95328)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;5&lt;/span&gt;&lt;span&gt; (7.532709 51.95209)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;6&lt;/span&gt;&lt;span&gt; (7.532869 51.95257)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 695 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Edge Data: 851 x 4&lt;/span&gt;&lt;span&gt;
   from    to name                  type       
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;                 &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;      
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     1     2 Havixbecker Strasse   residential
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     3     4 Pienersallee          secondary  
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     5     6 Schulte-Bernd-Strasse residential
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 848 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

&lt;style&gt;
.left-panel-sfnetworks_options-non_seq {
  color: #777;
  width: 38%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-sfnetworks_options-non_seq {
  width: 60%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-sfnetworks_options-non_seq {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





.note[See issue [#50](https://github.com/luukvdmeer/sfnetworks/issues/50)]
---
class: split-40
count: false
 

.left-panel-activate-user[

```r
*net
```
]
 
.right-panel-activate-user[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# An sfnetwork with&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;701&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;nodes and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;851&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;edges
#
# CRS: &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;EPSG:4326&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;
#
# A directed multigraph with 14 components with spatially explicit edges
#
# Node Data:     701 x 1 (active)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: POINT&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522622 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
             geometry
          &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt; (7.533722 51.95556)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt; (7.533461 51.95576)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt; (7.532442 51.95422)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;4&lt;/span&gt;&lt;span&gt;  (7.53209 51.95328)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;5&lt;/span&gt;&lt;span&gt; (7.532709 51.95209)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;6&lt;/span&gt;&lt;span&gt; (7.532869 51.95257)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 695 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Edge Data:     851 x 5&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: LINESTRING&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
   from    to name        type                                geometry
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;                       &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;LINESTRING [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     1     2 Havixbecke~ reside~ (7.533722 51.95556, 7.533461 51.955~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     3     4 Pienersall~ second~ (7.532442 51.95422, 7.53236 51.9537~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     5     6 Schulte-Be~ reside~ (7.532709 51.95209, 7.532823 51.952~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 848 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

---
class: split-40
count: false
 

.left-panel-activate-user[

```r
net %&gt;%  
* activate("edges")
```
]
 
.right-panel-activate-user[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# An sfnetwork with&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;701&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;nodes and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;851&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;edges
#
# CRS: &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;EPSG:4326&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;
#
# A directed multigraph with 14 components with spatially explicit edges
#
# Edge Data:     851 x 5 (active)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: LINESTRING&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
   from    to name       type                                 geometry
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;                        &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;LINESTRING [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     1     2 Havixbeck~ reside~ (7.533722 51.95556, 7.533461 51.9557~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     3     4 Pienersal~ second~ (7.532442 51.95422, 7.53236 51.95377~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     5     6 Schulte-B~ reside~ (7.532709 51.95209, 7.532823 51.9523~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;4&lt;/span&gt;&lt;span&gt;     7     8 &lt;/span&gt;&lt;span style='color: #BB0000;'&gt;NA&lt;/span&gt;&lt;span&gt;         path    (7.540063 51.94468, 7.539696 51.9447~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;5&lt;/span&gt;&lt;span&gt;     9    10 Welsinghe~ reside~ (7.537673 51.9475, 7.537614 51.94562)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;6&lt;/span&gt;&lt;span&gt;    11    12 &lt;/span&gt;&lt;span style='color: #BB0000;'&gt;NA&lt;/span&gt;&lt;span&gt;         footway (7.543791 51.94733, 7.54369 51.94686~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 845 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Node Data:     701 x 1&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: POINT&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522622 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
             geometry
          &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt; (7.533722 51.95556)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt; (7.533461 51.95576)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt; (7.532442 51.95422)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 698 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

---
class: split-40
count: false
 

.left-panel-activate-user[

```r
net %&gt;%  
  activate("edges") %&gt;%  
* st_geometry()
```
]
 
.right-panel-activate-user[

```
Geometry set for 851 features 
geometry type:  LINESTRING
dimension:      XY
bbox:           xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax: 51.9612
geographic CRS: WGS 84
First 5 geometries:
```

```
LINESTRING (7.533722 51.95556, 7.533461 51.95576)
```

```
LINESTRING (7.532442 51.95422, 7.53236 51.95377...
```

```
LINESTRING (7.532709 51.95209, 7.532823 51.9523...
```

```
LINESTRING (7.540063 51.94468, 7.539696 51.9447...
```

```
LINESTRING (7.537673 51.9475, 7.537614 51.94562)
```
]

---
class: split-40
count: false
 

.left-panel-activate-user[

```r
net %&gt;%  
  activate("edges") %&gt;%  
  st_geometry()  

*net %&gt;%
* activate("nodes") %&gt;%
* st_geometry()
```
]
 
.right-panel-activate-user[

```
Geometry set for 851 features 
geometry type:  LINESTRING
dimension:      XY
bbox:           xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax: 51.9612
geographic CRS: WGS 84
First 5 geometries:
```

```
LINESTRING (7.533722 51.95556, 7.533461 51.95576)
```

```
LINESTRING (7.532442 51.95422, 7.53236 51.95377...
```

```
LINESTRING (7.532709 51.95209, 7.532823 51.9523...
```

```
LINESTRING (7.540063 51.94468, 7.539696 51.9447...
```

```
LINESTRING (7.537673 51.9475, 7.537614 51.94562)
```

```
Geometry set for 701 features 
geometry type:  POINT
dimension:      XY
bbox:           xmin: 7.522622 ymin: 51.94151 xmax: 7.546705 ymax: 51.9612
geographic CRS: WGS 84
First 5 geometries:
```

```
POINT (7.533722 51.95556)
```

```
POINT (7.533461 51.95576)
```

```
POINT (7.532442 51.95422)
```

```
POINT (7.53209 51.95328)
```

```
POINT (7.532709 51.95209)
```
]

&lt;style&gt;
.left-panel-activate-user {
  color: #777;
  width: 38%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-activate-user {
  width: 60%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-activate-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---
class: split-40
count: false
 

.left-panel-filter-user[

```r
*net = roxel %&gt;% as_sfnetwork(directed = F)
```
]
 
.right-panel-filter-user[

]

---
class: split-40
count: false
 

.left-panel-filter-user[

```r
net = roxel %&gt;% as_sfnetwork(directed = F)  

*plot(net)
```
]
 
.right-panel-filter-user[
&lt;img src="slides_files/figure-html/filter_user_2_output-1.png" width="432" /&gt;
]

---
class: split-40
count: false
 

.left-panel-filter-user[

```r
net = roxel %&gt;% as_sfnetwork(directed = F)  

plot(net)  

*rect = st_multipoint(c(
*   st_point(c(7.53173, 51.95662)),
*   st_point(c(7.53173, 51.95190)),
*   st_point(c(7.53778, 51.95190)),
*   st_point(c(7.53778, 51.95662))
* )) %&gt;%
* st_cast('POLYGON') %&gt;%
* st_sfc(crs = 4326)

*rect %&gt;%
* plot(
* border = "Red",
* lwd = 2,
* add = TRUE
*) 
```
]
 
.right-panel-filter-user[
&lt;img src="slides_files/figure-html/filter_user_3_output-1.png" width="432" /&gt;
]

---
class: split-40
count: false
 

.left-panel-filter-user[

```r
net = roxel %&gt;% as_sfnetwork(directed = F)  

plot(net)  

rect = st_multipoint(c(  
    st_point(c(7.53173, 51.95662)),  
    st_point(c(7.53173, 51.95190)),  
    st_point(c(7.53778, 51.95190)),  
    st_point(c(7.53778, 51.95662))  
  )) %&gt;%  
  st_cast('POLYGON') %&gt;%  
  st_sfc(crs = 4326)  

rect %&gt;%  
  plot(  
  border = "Red",  
  lwd = 2,  
  add = TRUE  
)  

*net %&gt;%
* st_filter(rect, .pred = st_intersects) %&gt;%
* plot(col = "Orange", add = TRUE)
```
]
 
.right-panel-filter-user[

```
although coordinates are longitude/latitude, st_intersects assumes that they are planar
although coordinates are longitude/latitude, st_intersects assumes that they are planar
```

&lt;img src="slides_files/figure-html/filter_user_4_output-1.png" width="432" /&gt;
]

&lt;style&gt;
.left-panel-filter-user {
  color: #777;
  width: 38%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-filter-user {
  width: 60%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-filter-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





.note[Other supported `sf` functions: spatial joins, coordinate transformations]
---

### Not supported functions

&gt; There is a clear limitation in the relational data structure that requires rows to maintain their identity. 

&gt; For sfnetwork objects, this also means that the geometries of features should be maintained, or at least the endpoints of these geometries, in the case of the edges. 

&gt; That is, functions that summarise geometries, or (may) change their .orange[type, shape or position], are not supported.

---
class: split-40
count: false
 

.left-panel-extraction-user[

```r
*net %&gt;%
* st_transform(3035) %&gt;%
* activate("nodes")
```
]
 
.right-panel-extraction-user[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# An sfnetwork with&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;701&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;nodes and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;851&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;edges
#
# CRS: &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;EPSG:3035&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;
#
# An undirected multigraph with 14 components with spatially explicit edges
#
# Node Data:     701 x 1 (active)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: POINT&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 4150707 ymin: 3206375 xmax: 4152367 ymax:
#   3208565&lt;/span&gt;&lt;span&gt;
           geometry
        &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [m]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt; (4151491 3207923)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt; (4151474 3207946)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt; (4151398 3207777)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;4&lt;/span&gt;&lt;span&gt; (4151370 3207673)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;5&lt;/span&gt;&lt;span&gt; (4151408 3207539)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;6&lt;/span&gt;&lt;span&gt; (4151421 3207592)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 695 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Edge Data:     851 x 5&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: LINESTRING&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 4150707 ymin: 3206375 xmax: 4152367 ymax:
#   3208565&lt;/span&gt;&lt;span&gt;
   from    to name         type                               geometry
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;                      &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;LINESTRING [m]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     1     2 Havixbecker~ reside~  (4151491 3207923, 4151474 3207946)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     3     4 Pienersallee second~ (4151398 3207777, 4151390 3207727,~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     5     6 Schulte-Ber~ reside~ (4151408 3207539, 4151417 3207573,~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 848 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

---
class: split-40
count: false
 

.left-panel-extraction-user[

```r
net %&gt;%  
  st_transform(3035) %&gt;%  
  activate("nodes") %&gt;%  
* st_as_sf()
```
]
 
.right-panel-extraction-user[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;Simple feature collection with 701 features and 0 fields
geometry type:  POINT
dimension:      XY
bbox:           xmin: 4150707 ymin: 3206375 xmax: 4152367 ymax: 3208565
projected CRS:  ETRS89-extended / LAEA Europe
&lt;span style='color: #555555;'&gt;# A tibble: 701 x 1&lt;/span&gt;&lt;span&gt;
            geometry
         &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [m]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 1&lt;/span&gt;&lt;span&gt; (4151491 3207923)
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 2&lt;/span&gt;&lt;span&gt; (4151474 3207946)
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 3&lt;/span&gt;&lt;span&gt; (4151398 3207777)
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 4&lt;/span&gt;&lt;span&gt; (4151370 3207673)
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 5&lt;/span&gt;&lt;span&gt; (4151408 3207539)
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 6&lt;/span&gt;&lt;span&gt; (4151421 3207592)
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 7&lt;/span&gt;&lt;span&gt; (4151885 3206698)
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 8&lt;/span&gt;&lt;span&gt; (4151762 3206789)
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 9&lt;/span&gt;&lt;span&gt; (4151732 3207017)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;10&lt;/span&gt;&lt;span&gt; (4151721 3206809)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 691 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

---
class: split-40
count: false
 

.left-panel-extraction-user[

```r
net %&gt;%  
  st_transform(3035) %&gt;%  
  activate("nodes") %&gt;%  
  st_as_sf() %&gt;%  
* mutate(
*   aoi = st_area(
*     st_collection_extract(
*       st_voronoi(do.call(c, st_geometry(.)))
* )))
```
]
 
.right-panel-extraction-user[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;Simple feature collection with 701 features and 1 field
geometry type:  POINT
dimension:      XY
bbox:           xmin: 4150707 ymin: 3206375 xmax: 4152367 ymax: 3208565
projected CRS:  ETRS89-extended / LAEA Europe
&lt;span style='color: #555555;'&gt;# A tibble: 701 x 2&lt;/span&gt;&lt;span&gt;
            geometry      aoi
 &lt;/span&gt;&lt;span style='color: #555555;'&gt;*&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [m]&amp;gt;&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;dbl&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 1&lt;/span&gt;&lt;span&gt; (4151491 3207923) 1&lt;/span&gt;&lt;span style='text-decoration: underline;'&gt;837&lt;/span&gt;&lt;span&gt;540.
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 2&lt;/span&gt;&lt;span&gt; (4151474 3207946) 2&lt;/span&gt;&lt;span style='text-decoration: underline;'&gt;563&lt;/span&gt;&lt;span&gt;698.
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 3&lt;/span&gt;&lt;span&gt; (4151398 3207777)   &lt;/span&gt;&lt;span style='text-decoration: underline;'&gt;36&lt;/span&gt;&lt;span&gt;462.
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 4&lt;/span&gt;&lt;span&gt; (4151370 3207673)  &lt;/span&gt;&lt;span style='text-decoration: underline;'&gt;359&lt;/span&gt;&lt;span&gt;624.
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 5&lt;/span&gt;&lt;span&gt; (4151408 3207539)   &lt;/span&gt;&lt;span style='text-decoration: underline;'&gt;12&lt;/span&gt;&lt;span&gt;954.
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 6&lt;/span&gt;&lt;span&gt; (4151421 3207592)   &lt;/span&gt;&lt;span style='text-decoration: underline;'&gt;11&lt;/span&gt;&lt;span&gt;089.
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 7&lt;/span&gt;&lt;span&gt; (4151885 3206698)  &lt;/span&gt;&lt;span style='text-decoration: underline;'&gt;190&lt;/span&gt;&lt;span&gt;473.
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 8&lt;/span&gt;&lt;span&gt; (4151762 3206789)   &lt;/span&gt;&lt;span style='text-decoration: underline;'&gt;26&lt;/span&gt;&lt;span&gt;370.
&lt;/span&gt;&lt;span style='color: #555555;'&gt; 9&lt;/span&gt;&lt;span&gt; (4151732 3207017)    &lt;/span&gt;&lt;span style='text-decoration: underline;'&gt;8&lt;/span&gt;&lt;span&gt;416.
&lt;/span&gt;&lt;span style='color: #555555;'&gt;10&lt;/span&gt;&lt;span&gt; (4151721 3206809)    &lt;/span&gt;&lt;span style='text-decoration: underline;'&gt;4&lt;/span&gt;&lt;span&gt;867.
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 691 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

---
class: split-40
count: false
 

.left-panel-extraction-user[

```r
net %&gt;%  
  st_transform(3035) %&gt;%  
  activate("nodes") %&gt;%  
  st_as_sf() %&gt;%  
  mutate(  
    aoi = st_area(  
      st_collection_extract(  
        st_voronoi(do.call(c, st_geometry(.)))  
  ))) -&gt;  
* y

*net %&gt;%
* st_transform(3035) %&gt;%
* activate("nodes")
```
]
 
.right-panel-extraction-user[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# An sfnetwork with&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;701&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;nodes and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;851&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;edges
#
# CRS: &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;EPSG:3035&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;
#
# An undirected multigraph with 14 components with spatially explicit edges
#
# Node Data:     701 x 1 (active)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: POINT&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 4150707 ymin: 3206375 xmax: 4152367 ymax:
#   3208565&lt;/span&gt;&lt;span&gt;
           geometry
        &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [m]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt; (4151491 3207923)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt; (4151474 3207946)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt; (4151398 3207777)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;4&lt;/span&gt;&lt;span&gt; (4151370 3207673)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;5&lt;/span&gt;&lt;span&gt; (4151408 3207539)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;6&lt;/span&gt;&lt;span&gt; (4151421 3207592)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 695 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Edge Data:     851 x 5&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: LINESTRING&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 4150707 ymin: 3206375 xmax: 4152367 ymax:
#   3208565&lt;/span&gt;&lt;span&gt;
   from    to name         type                               geometry
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;                      &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;LINESTRING [m]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     1     2 Havixbecker~ reside~  (4151491 3207923, 4151474 3207946)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     3     4 Pienersallee second~ (4151398 3207777, 4151390 3207727,~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     5     6 Schulte-Ber~ reside~ (4151408 3207539, 4151417 3207573,~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 848 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

---
class: split-40
count: false
 

.left-panel-extraction-user[

```r
net %&gt;%  
  st_transform(3035) %&gt;%  
  activate("nodes") %&gt;%  
  st_as_sf() %&gt;%  
  mutate(  
    aoi = st_area(  
      st_collection_extract(  
        st_voronoi(do.call(c, st_geometry(.)))  
  ))) -&gt;  
  y  

net %&gt;%  
  st_transform(3035) %&gt;%  
  activate("nodes") %&gt;%  
* st_join(y)
```
]
 
.right-panel-extraction-user[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# An sfnetwork with&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;701&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;nodes and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;851&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;edges
#
# CRS: &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;EPSG:3035&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;
#
# An undirected multigraph with 14 components with spatially explicit edges
#
# Node Data:     701 x 2 (active)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: POINT&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 4150707 ymin: 3206375 xmax: 4152367 ymax:
#   3208565&lt;/span&gt;&lt;span&gt;
           geometry      aoi
        &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [m]&amp;gt;&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;dbl&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt; (4151491 3207923) 1&lt;/span&gt;&lt;span style='text-decoration: underline;'&gt;837&lt;/span&gt;&lt;span&gt;540.
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt; (4151474 3207946) 2&lt;/span&gt;&lt;span style='text-decoration: underline;'&gt;563&lt;/span&gt;&lt;span&gt;698.
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt; (4151398 3207777)   &lt;/span&gt;&lt;span style='text-decoration: underline;'&gt;36&lt;/span&gt;&lt;span&gt;462.
&lt;/span&gt;&lt;span style='color: #555555;'&gt;4&lt;/span&gt;&lt;span&gt; (4151370 3207673)  &lt;/span&gt;&lt;span style='text-decoration: underline;'&gt;359&lt;/span&gt;&lt;span&gt;624.
&lt;/span&gt;&lt;span style='color: #555555;'&gt;5&lt;/span&gt;&lt;span&gt; (4151408 3207539)   &lt;/span&gt;&lt;span style='text-decoration: underline;'&gt;12&lt;/span&gt;&lt;span&gt;954.
&lt;/span&gt;&lt;span style='color: #555555;'&gt;6&lt;/span&gt;&lt;span&gt; (4151421 3207592)   &lt;/span&gt;&lt;span style='text-decoration: underline;'&gt;11&lt;/span&gt;&lt;span&gt;089.
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 695 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Edge Data:     851 x 5&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: LINESTRING&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 4150707 ymin: 3206375 xmax: 4152367 ymax:
#   3208565&lt;/span&gt;&lt;span&gt;
   from    to name         type                               geometry
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;                      &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;LINESTRING [m]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     1     2 Havixbecker~ reside~  (4151491 3207923, 4151474 3207946)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     3     4 Pienersallee second~ (4151398 3207777, 4151390 3207727,~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     5     6 Schulte-Ber~ reside~ (4151408 3207539, 4151417 3207573,~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 848 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

&lt;style&gt;
.left-panel-extraction-user {
  color: #777;
  width: 38%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-extraction-user {
  width: 60%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-extraction-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;






---
class: center, middle

## Extending the vocabulary

---
class: split-40
count: false
 

.left-panel-edgemeasures-rotate[

```r
net %&gt;%  
  activate("edges") %&gt;%  
  mutate(length = edge_length())   
```
]
 
.right-panel-edgemeasures-rotate[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# An sfnetwork with&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;701&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;nodes and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;851&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;edges
#
# CRS: &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;EPSG:4326&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;
#
# An undirected multigraph with 14 components with spatially explicit edges
#
# Edge Data:     851 x 6 (active)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: LINESTRING&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
   from    to name     type                          geometry   length
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;                 &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;LINESTRING [°]&amp;gt;&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span style='color: #555555;'&gt;[m]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     1     2 Havixbe~ resid~ (7.533722 51.95556, 7.533461 5~  28.859~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     3     4 Pieners~ secon~ (7.532442 51.95422, 7.53236 51~ 107.704~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     5     6 Schulte~ resid~ (7.532709 51.95209, 7.532823 5~  54.362~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;4&lt;/span&gt;&lt;span&gt;     7     8 &lt;/span&gt;&lt;span style='color: #BB0000;'&gt;NA&lt;/span&gt;&lt;span&gt;       path   (7.540063 51.94468, 7.539696 5~ 155.230~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;5&lt;/span&gt;&lt;span&gt;     9    10 Welsing~ resid~ (7.537673 51.9475, 7.537614 51~ 208.663~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;6&lt;/span&gt;&lt;span&gt;    11    12 &lt;/span&gt;&lt;span style='color: #BB0000;'&gt;NA&lt;/span&gt;&lt;span&gt;       footw~ (7.543791 51.94733, 7.54369 51~  63.023~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 845 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Node Data:     701 x 1&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: POINT&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522622 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
             geometry
          &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt; (7.533722 51.95556)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt; (7.533461 51.95576)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt; (7.532442 51.95422)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 698 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

---
class: split-40
count: false
 

.left-panel-edgemeasures-rotate[

```r
net %&gt;%  
  activate("edges") %&gt;%  
* mutate(straight = edge_straight_length())
```
]
 
.right-panel-edgemeasures-rotate[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# An sfnetwork with&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;701&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;nodes and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;851&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;edges
#
# CRS: &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;EPSG:4326&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;
#
# An undirected multigraph with 14 components with spatially explicit edges
#
# Edge Data:     851 x 6 (active)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: LINESTRING&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
   from    to name     type                          geometry straight
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;                 &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;LINESTRING [°]&amp;gt;&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span style='color: #555555;'&gt;[m]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     1     2 Havixbe~ resid~ (7.533722 51.95556, 7.533461 5~  28.859~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     3     4 Pieners~ secon~ (7.532442 51.95422, 7.53236 51~ 107.073~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     5     6 Schulte~ resid~ (7.532709 51.95209, 7.532823 5~  54.336~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;4&lt;/span&gt;&lt;span&gt;     7     8 &lt;/span&gt;&lt;span style='color: #BB0000;'&gt;NA&lt;/span&gt;&lt;span&gt;       path   (7.540063 51.94468, 7.539696 5~ 153.916~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;5&lt;/span&gt;&lt;span&gt;     9    10 Welsing~ resid~ (7.537673 51.9475, 7.537614 51~ 208.663~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;6&lt;/span&gt;&lt;span&gt;    11    12 &lt;/span&gt;&lt;span style='color: #BB0000;'&gt;NA&lt;/span&gt;&lt;span&gt;       footw~ (7.543791 51.94733, 7.54369 51~  61.702~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 845 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Node Data:     701 x 1&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: POINT&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522622 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
             geometry
          &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt; (7.533722 51.95556)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt; (7.533461 51.95576)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt; (7.532442 51.95422)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 698 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

---
class: split-40
count: false
 

.left-panel-edgemeasures-rotate[

```r
net %&gt;%  
  activate("edges") %&gt;%  
* mutate(circuity = edge_circuity())
```
]
 
.right-panel-edgemeasures-rotate[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# An sfnetwork with&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;701&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;nodes and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;851&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;edges
#
# CRS: &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;EPSG:4326&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;
#
# An undirected multigraph with 14 components with spatially explicit edges
#
# Edge Data:     851 x 6 (active)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: LINESTRING&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
   from    to name     type                          geometry circuity
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;                 &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;LINESTRING [°]&amp;gt;&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span style='color: #555555;'&gt;[1]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     1     2 Havixbe~ resid~ (7.533722 51.95556, 7.533461 5~ 1.000000
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     3     4 Pieners~ secon~ (7.532442 51.95422, 7.53236 51~ 1.005896
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     5     6 Schulte~ resid~ (7.532709 51.95209, 7.532823 5~ 1.000472
&lt;/span&gt;&lt;span style='color: #555555;'&gt;4&lt;/span&gt;&lt;span&gt;     7     8 &lt;/span&gt;&lt;span style='color: #BB0000;'&gt;NA&lt;/span&gt;&lt;span&gt;       path   (7.540063 51.94468, 7.539696 5~ 1.008539
&lt;/span&gt;&lt;span style='color: #555555;'&gt;5&lt;/span&gt;&lt;span&gt;     9    10 Welsing~ resid~ (7.537673 51.9475, 7.537614 51~ 1.000000
&lt;/span&gt;&lt;span style='color: #555555;'&gt;6&lt;/span&gt;&lt;span&gt;    11    12 &lt;/span&gt;&lt;span style='color: #BB0000;'&gt;NA&lt;/span&gt;&lt;span&gt;       footw~ (7.543791 51.94733, 7.54369 51~ 1.021405
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 845 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Node Data:     701 x 1&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: POINT&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522622 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
             geometry
          &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt; (7.533722 51.95556)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt; (7.533461 51.95576)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt; (7.532442 51.95422)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 698 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

&lt;style&gt;
.left-panel-edgemeasures-rotate {
  color: #777;
  width: 38%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-edgemeasures-rotate {
  width: 60%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-edgemeasures-rotate {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

class: split-40
count: false
 

.left-panel-shortestpath-user[

```r
*p1 = net %&gt;%
* activate(nodes) %&gt;%
* st_as_sf() %&gt;%
* slice(1)

*p2 = net %&gt;%
* activate(nodes) %&gt;%
* st_as_sf() %&gt;%
* slice(9)
```
]
 
.right-panel-shortestpath-user[

]

---
class: split-40
count: false
 

.left-panel-shortestpath-user[

```r
p1 = net %&gt;%  
  activate(nodes) %&gt;%  
  st_as_sf() %&gt;%  
  slice(1)  

p2 = net %&gt;%  
  activate(nodes) %&gt;%  
  st_as_sf() %&gt;%  
  slice(9)  

*p3 = sf::st_sfc(
* sf::st_geometry(p1)[[1]] + sf::st_point(c(0.01, 0.01)),
* crs = sf::st_crs(p1)
*) %&gt;% st_sf()

*p4 = sf::st_sfc(
* sf::st_geometry(p2)[[1]] + sf::st_point(c(0.01, 0.01)),
* crs = sf::st_crs(p2)
*) %&gt;% st_sf()
```
]
 
.right-panel-shortestpath-user[

]

---
class: split-40
count: false
 

.left-panel-shortestpath-user[

```r
p1 = net %&gt;%  
  activate(nodes) %&gt;%  
  st_as_sf() %&gt;%  
  slice(1)  

p2 = net %&gt;%  
  activate(nodes) %&gt;%  
  st_as_sf() %&gt;%  
  slice(9)  

p3 = sf::st_sfc(  
  sf::st_geometry(p1)[[1]] + sf::st_point(c(0.01, 0.01)),  
  crs = sf::st_crs(p1)  
) %&gt;% st_sf()  

p4 = sf::st_sfc(  
  sf::st_geometry(p2)[[1]] + sf::st_point(c(0.01, 0.01)),  
  crs = sf::st_crs(p2)  
) %&gt;% st_sf()  

*net %&gt;%
* # activate("edges") %&gt;%  # activate("edges") %&gt;%
* # mutate(weights = edge_length()) %&gt;%  # mutate(weights = edge_length()) %&gt;%
* st_shortest_paths(p2, p1) %&gt;%
* .$vpath
```
]
 
.right-panel-shortestpath-user[

```
although coordinates are longitude/latitude, st_nearest_feature assumes that they are planar
although coordinates are longitude/latitude, st_nearest_feature assumes that they are planar
```

```
[[1]]
+ 17/701 vertices, from a44a0e2:
 [1]   9 167 292 524 111 506 512 657 533 424 426 208 164 260 579 644
[17]   1
```
]

&lt;style&gt;
.left-panel-shortestpath-user {
  color: #777;
  width: 38%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-shortestpath-user {
  width: 60%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-shortestpath-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





.note[See issue [#54](https://github.com/luukvdmeer/sfnetworks/issues/54)]

---

class: split-40
count: false
 

.left-panel-morphers-user[

```r
*net %&gt;%
* morph(to_components) -&gt;
* net_m
```
]
 
.right-panel-morphers-user[

]

---
class: split-40
count: false
 

.left-panel-morphers-user[

```r
net %&gt;%  
  morph(to_components) -&gt;  
  net_m  

*net_m %&gt;% class()
```
]
 
.right-panel-morphers-user[

```
[1] "morphed_sfnetwork" "morphed_tbl_graph" "list"             
```
]

---
class: split-40
count: false
 

.left-panel-morphers-user[

```r
net %&gt;%  
  morph(to_components) -&gt;  
  net_m  

net_m %&gt;% class()  

*net_m %&gt;% length()
```
]
 
.right-panel-morphers-user[

```
[1] "morphed_sfnetwork" "morphed_tbl_graph" "list"             
```

```
[1] 14
```
]

---
class: split-40
count: false
 

.left-panel-morphers-user[

```r
net %&gt;%  
  morph(to_components) -&gt;  
  net_m  

net_m %&gt;% class()  

net_m %&gt;% length()  

*net %&gt;%
* convert(to_components, .select = 1)
```
]
 
.right-panel-morphers-user[

```
[1] "morphed_sfnetwork" "morphed_tbl_graph" "list"             
```

```
[1] 14
```

&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# An sfnetwork with&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;675&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;nodes and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;838&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;edges
#
# CRS: &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;EPSG:4326&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;
#
# An undirected multigraph with 1 component with spatially explicit edges
#
# Node Data:     675 x 2 (active)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: POINT&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522622 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
             geometry .tidygraph_node_index
          &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [°]&amp;gt;&lt;/span&gt;&lt;span&gt;                 &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt; (7.533722 51.95556)                     1
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt; (7.533461 51.95576)                     2
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt; (7.532442 51.95422)                     3
&lt;/span&gt;&lt;span style='color: #555555;'&gt;4&lt;/span&gt;&lt;span&gt;  (7.53209 51.95328)                     4
&lt;/span&gt;&lt;span style='color: #555555;'&gt;5&lt;/span&gt;&lt;span&gt; (7.532709 51.95209)                     5
&lt;/span&gt;&lt;span style='color: #555555;'&gt;6&lt;/span&gt;&lt;span&gt; (7.532869 51.95257)                     6
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 669 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Edge Data:     838 x 6&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: LINESTRING&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
   from    to name   type                    geometry .tidygraph_edge~
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;           &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;LINESTRING [°]&amp;gt;&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     1     2 Havix~ resi~ (7.533722 51.95556, 7.533~                1
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     3     4 Piene~ seco~ (7.532442 51.95422, 7.532~                2
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     5     6 Schul~ resi~ (7.532709 51.95209, 7.532~                3
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 835 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

&lt;style&gt;
.left-panel-morphers-user {
  color: #777;
  width: 38%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-morphers-user {
  width: 60%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-morphers-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

class: split-40
count: false
 

.left-panel-spatialmorphers1-user[

```r
*net
```
]
 
.right-panel-spatialmorphers1-user[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# An sfnetwork with&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;701&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;nodes and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;851&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;edges
#
# CRS: &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;EPSG:4326&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;
#
# An undirected multigraph with 14 components with spatially explicit edges
#
# Node Data:     701 x 1 (active)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: POINT&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522622 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
             geometry
          &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt; (7.533722 51.95556)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt; (7.533461 51.95576)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt; (7.532442 51.95422)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;4&lt;/span&gt;&lt;span&gt;  (7.53209 51.95328)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;5&lt;/span&gt;&lt;span&gt; (7.532709 51.95209)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;6&lt;/span&gt;&lt;span&gt; (7.532869 51.95257)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 695 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Edge Data:     851 x 5&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: LINESTRING&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
   from    to name        type                                geometry
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;                       &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;LINESTRING [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     1     2 Havixbecke~ reside~ (7.533722 51.95556, 7.533461 51.955~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     3     4 Pienersall~ second~ (7.532442 51.95422, 7.53236 51.9537~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     5     6 Schulte-Be~ reside~ (7.532709 51.95209, 7.532823 51.952~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 848 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

---
class: split-40
count: false
 

.left-panel-spatialmorphers1-user[

```r
net %&gt;%  
* convert(to_spatial_coordinates)
```
]
 
.right-panel-spatialmorphers1-user[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# A tbl_graph: 701 nodes and 851 edges
#
# An undirected multigraph with 14 components
#
# Node Data: 701 x 3 (active)&lt;/span&gt;&lt;span&gt;
  .tidygraph_node_index     X     Y
                  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;dbl&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;dbl&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;                     1  7.53  52.0
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;                     2  7.53  52.0
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;                     3  7.53  52.0
&lt;/span&gt;&lt;span style='color: #555555;'&gt;4&lt;/span&gt;&lt;span&gt;                     4  7.53  52.0
&lt;/span&gt;&lt;span style='color: #555555;'&gt;5&lt;/span&gt;&lt;span&gt;                     5  7.53  52.0
&lt;/span&gt;&lt;span style='color: #555555;'&gt;6&lt;/span&gt;&lt;span&gt;                     6  7.53  52.0
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 695 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Edge Data: 851 x 5&lt;/span&gt;&lt;span&gt;
   from    to name                  type        .tidygraph_edge_index
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;                 &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;                       &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     1     2 Havixbecker Strasse   residential                     1
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     3     4 Pienersallee          secondary                       2
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     5     6 Schulte-Bernd-Strasse residential                     3
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 848 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

&lt;style&gt;
.left-panel-spatialmorphers1-user {
  color: #777;
  width: 38%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-spatialmorphers1-user {
  width: 60%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-spatialmorphers1-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---
class: split-40
count: false
 

.left-panel-spatialmorphers2-user[

```r
*net %&gt;%
* convert(to_spatial_dense_graph)
```
]
 
.right-panel-spatialmorphers2-user[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# An sfnetwork with&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;1517&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;nodes and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;1692&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;edges
#
# CRS: &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;EPSG:4326&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;
#
# A directed simple graph with 1 component with spatially explicit edges
#
# Node Data:     1,517 x 1 (active)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: POINT&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
             geometry
          &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt; (7.533722 51.95556)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt; (7.533461 51.95576)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;  (7.53236 51.95377)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;4&lt;/span&gt;&lt;span&gt;  (7.53209 51.95328)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;5&lt;/span&gt;&lt;span&gt; (7.532442 51.95422)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;6&lt;/span&gt;&lt;span&gt; (7.532823 51.95239)
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 1,511 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Edge Data:     1,692 x 6&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: LINESTRING&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax:
#   51.9612&lt;/span&gt;&lt;span&gt;
   from    to name   type   .tidygraph_edge~                  geometry
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;             &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt;          &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;LINESTRING [°]&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     1     2 Havix~ resid~                1 (7.533722 51.95556, 7.53~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     3     4 Piene~ secon~                2 (7.53236 51.95377, 7.532~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     5     3 Piene~ secon~                2 (7.532442 51.95422, 7.53~
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 1,689 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

---
class: split-40
count: false
 

.left-panel-spatialmorphers2-user[

```r
net %&gt;%  
  convert(to_spatial_dense_graph) %&gt;%  
* plot()
```
]
 
.right-panel-spatialmorphers2-user[
&lt;img src="slides_files/figure-html/spatialmorphers2_user_2_output-1.png" width="432" /&gt;
]

&lt;style&gt;
.left-panel-spatialmorphers2-user {
  color: #777;
  width: 38%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-spatialmorphers2-user {
  width: 60%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-spatialmorphers2-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---
class: split-40
count: false
 

.left-panel-spatialmorphers3-user[

```r
*net %&gt;%
* convert(to_spatial_shortest_paths, 1, 9)
```
]
 
.right-panel-spatialmorphers3-user[
&lt;PRE class="fansi fansi-output"&gt;&lt;CODE&gt;&lt;span style='color: #555555;'&gt;# An sfnetwork with&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;17&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;nodes and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;16&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;edges
#
# CRS: &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;EPSG:4326&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;'&gt;
#
# An unrooted tree with spatially explicit edges
#
# Node Data:     17 x 2 (active)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: POINT&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.533722 ymin: 51.9475 xmax: 7.538665 ymax:
#   51.95556&lt;/span&gt;&lt;span&gt;
             geometry .tidygraph_node_index
          &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;POINT [°]&amp;gt;&lt;/span&gt;&lt;span&gt;                 &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt; (7.533722 51.95556)                     1
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;  (7.537673 51.9475)                     9
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt; (7.538166 51.94902)                   111
&lt;/span&gt;&lt;span style='color: #555555;'&gt;4&lt;/span&gt;&lt;span&gt; (7.535656 51.95448)                   164
&lt;/span&gt;&lt;span style='color: #555555;'&gt;5&lt;/span&gt;&lt;span&gt; (7.538665 51.94794)                   167
&lt;/span&gt;&lt;span style='color: #555555;'&gt;6&lt;/span&gt;&lt;span&gt; (7.535758 51.95404)                   208
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 11 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;#
# Edge Data:     16 x 6&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Geometry type: LINESTRING&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Dimension:     XY&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# Bounding box:  xmin: 7.533722 ymin: 51.9475 xmax: 7.538665 ymax:
#   51.95556&lt;/span&gt;&lt;span&gt;
   from    to name   type                    geometry .tidygraph_edge~
  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;fct&amp;gt;&lt;/span&gt;&lt;span&gt;           &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;LINESTRING [°]&amp;gt;&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span style='color: #555555;font-style: italic;'&gt;&amp;lt;int&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span style='color: #555555;'&gt;1&lt;/span&gt;&lt;span&gt;     2     5 Nottu~ resi~ (7.537673 51.9475, 7.5380~               94
&lt;/span&gt;&lt;span style='color: #555555;'&gt;2&lt;/span&gt;&lt;span&gt;     4     7 Im Se~ resi~ (7.535677 51.95453, 7.535~              156
&lt;/span&gt;&lt;span style='color: #555555;'&gt;3&lt;/span&gt;&lt;span&gt;     7    15 &lt;/span&gt;&lt;span style='color: #BB0000;'&gt;NA&lt;/span&gt;&lt;span&gt;     cycl~ (7.535677 51.95453, 7.535~              456
&lt;/span&gt;&lt;span style='color: #555555;'&gt;# ... with 13 more rows&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/CODE&gt;&lt;/PRE&gt;
]

---
class: split-40
count: false
 

.left-panel-spatialmorphers3-user[

```r
net %&gt;%  
  convert(to_spatial_shortest_paths, 1, 9) -&gt;  
* net_sp

*plot(net)
```
]
 
.right-panel-spatialmorphers3-user[
&lt;img src="slides_files/figure-html/spatialmorphers3_user_2_output-1.png" width="432" /&gt;
]

---
class: split-40
count: false
 

.left-panel-spatialmorphers3-user[

```r
net %&gt;%  
  convert(to_spatial_shortest_paths, 1, 9) -&gt;  
  net_sp  

plot(net)  
*plot(net_sp,
*    col = "Orange", lwd = 1.5, cex = 1.5,
*    add = T)
```
]
 
.right-panel-spatialmorphers3-user[
&lt;img src="slides_files/figure-html/spatialmorphers3_user_3_output-1.png" width="432" /&gt;
]

&lt;style&gt;
.left-panel-spatialmorphers3-user {
  color: #777;
  width: 38%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-spatialmorphers3-user {
  width: 60%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-spatialmorphers3-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

class: split-40
count: false
 

.left-panel-spatialmorphers4-user[

```r
*net %&gt;%
* morph(to_spatial_shortest_paths, 1, c(9, 10))
```
]
 
.right-panel-spatialmorphers4-user[

```
# A tbl_graph temporarily morphed to a .f representation
# 
# Original graph is an undirected multigraph with 14 components
# consisting of 701 nodes and 851 edges
```
]

---
class: split-40
count: false
 

.left-panel-spatialmorphers4-user[

```r
net %&gt;%  
  morph(to_spatial_shortest_paths, 1, c(9, 10)) %&gt;%  
* sapply(function(x) sum(st_length(x)))
```
]
 
.right-panel-spatialmorphers4-user[

```
[1] 0 0
```
]

&lt;style&gt;
.left-panel-spatialmorphers4-user {
  color: #777;
  width: 38%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-spatialmorphers4-user {
  width: 60%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-spatialmorphers4-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---
background-image: url(https://pbs.twimg.com/media/EZvQNJlWoAE4D_c?format=jpg&amp;name=4096x4096)

# Applications 

--

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;


Many potential applications including:

Transport planning/modelling (Robin), Road safety (Andrea), River network analysis (e.g. Water quality research, Flooding research, Aquatic ecology) Electricity network analysis, Social network analysis, Many More!

---

### How to cope with reduced public transport capacity post COVID-19?

Plans from Leeds City Council responding to national [guidance](https://www.gov.uk/government/publications/reallocating-road-space-in-response-to-covid-19-statutory-guidance-for-local-authorities) and [funding](https://www.gov.uk/government/news/2-billion-package-to-create-new-era-for-cycling-and-walking) for 'pop-up' cycleways:


![](https://pbs.twimg.com/media/EZ_-A0dXgAAlBzt?format=png&amp;name=900x900)

---

## Spatial networks can support planning

### Transport networks are spatial networks

Spatial network representation in R:

![](https://raw.githubusercontent.com/cyipt/popupCycleways/master/figures/mapout.png)



---

background-image: url("https://raw.githubusercontent.com/cyipt/popupCycleways/master/figures/facet-output.png")
background-position: right
background-size: contain

--

### sf + igraph used in project to support investment in 'pop-ups' nationwide

Every city in England

--

Results in Leeds:


```
             name
1 Headingley Lane
2            A660
3  Woodhouse Lane
4             A65
5  Kirkstall Road
```

Cycleway planned for

Kirkstall Road (source: [BBC](https://www.bbc.co.uk/news/uk-england-leeds-52577554))

Free and open results:

[www.cyipt.bike/rapid](https://www.cyipt.bike/rapid)

Source code: [github.com/cyipt/popupCycleways](https://github.com/cyipt/popupCycleways)

&lt;!-- ![](https://raw.githubusercontent.com/cyipt/popupCycleways/master/figures/facet-output.png) --&gt;




---

## Ingredients to prioritise transport infrastructure

.left-column[

- Current travel patterns
- Road attribute data 
- Potential usage levels
- Impact on overall network

**Spatial networks can help, especially with the last two**

Source: https://www.pct.bike/


]

.right-column[

![](figs/pct.png)


]

---

## Why not use `stplanr::SpatialLinesNetwork`?

.pull-left[


- You can:


```r
r_stplanr = stplanr::SpatialLinesNetwork(roxel)
```


```r
l = stplanr::route_local(r_stplanr, c(7.53, 51.95), c(7.54, 51.95))
plot(r_stplanr@sl$geometry)
plot(l$geometry, col = "red", lwd = 5, add = TRUE)
```

&lt;img src="slides_files/figure-html/unnamed-chunk-8-1.png" width="432" /&gt;
]

.pull-right[

Issues with stplanr implementation:

- `igraph` and `sf` parts are separate
- Hard to access the nodes
- Subsetting requires rebuilding the graph


```r
class(r_stplanr)
```

```
[1] "sfNetwork"
attr(,"package")
[1] "stplanr"
```

```r
slotNames(r_stplanr) # s4 class system
```

```
[1] "sl"          "g"           "nb"          "weightfield"
```

]

---

## Getting from A to B

---

##  Another example: formatting `sfnetwork` data for a road safety model

We can use `sf`, `tidygraph`, `igraph` and several other packages for: 

--

- summarizing the spatial dimension of the road network using several metrics (`tidygraph`); 

--

- extracting the adjacency matrix of the edges, which is typically one of the ingredients in a spatial model (`igraph`); 

--

- subsetting the road network considering only a particular geographical area (`sf`).  
&lt;!-- summarize the spatial dimension of the road network through several metrics and adjacency matrices.  --&gt;

--

Let's see an example but first we need to create the `sfnetwork` version of `roxel` data: 


```r
net &lt;- as_sfnetwork(roxel, directed = FALSE)
```



---
class: center, middle

### Summarizing Graph Characteristics

---

class: split-40
count: false
 

.left-panel-nodes_degree-user[

```r
# Estimate nodes centrality degree
*net &lt;- net
```
]
 
.right-panel-nodes_degree-user[

]

---
class: split-40
count: false
 

.left-panel-nodes_degree-user[

```r
# Estimate nodes centrality degree
net &lt;- net %&gt;%  
* activate("nodes")
```
]
 
.right-panel-nodes_degree-user[

]

---
class: split-40
count: false
 

.left-panel-nodes_degree-user[

```r
# Estimate nodes centrality degree
net &lt;- net %&gt;%  
  activate("nodes") %&gt;%  
* mutate(degree = centrality_degree())
```
]
 
.right-panel-nodes_degree-user[

]

---
class: split-40
count: false
 

.left-panel-nodes_degree-user[

```r
# Estimate nodes centrality degree
net &lt;- net %&gt;%  
  activate("nodes") %&gt;%  
  mutate(degree = centrality_degree())  

# Plot with tmap. We need to escape the nodes and
# edges dimension and rebuild the sf structure.
*tm_shape(net %&gt;% activate("edges") %&gt;% st_as_sf()) +
* tm_lines()
```
]
 
.right-panel-nodes_degree-user[
&lt;img src="slides_files/figure-html/nodes_degree_user_4_output-1.png" width="432" /&gt;
]

---
class: split-40
count: false
 

.left-panel-nodes_degree-user[

```r
# Estimate nodes centrality degree
net &lt;- net %&gt;%  
  activate("nodes") %&gt;%  
  mutate(degree = centrality_degree())  

# Plot with tmap. We need to escape the nodes and
# edges dimension and rebuild the sf structure.
tm_shape(net %&gt;% activate("edges") %&gt;% st_as_sf()) +  
  tm_lines() +  
*tm_shape(net %&gt;% activate("nodes") %&gt;% st_as_sf()) +
* tm_dots(
*   size = 0.2,
*   col = "degree",
*   as.count = TRUE,
*   palette = "viridis",
*   title = ""
* ) +
*tm_layout(legend.text.size = 2)
```
]
 
.right-panel-nodes_degree-user[
&lt;img src="slides_files/figure-html/nodes_degree_user_5_output-1.png" width="432" /&gt;
]

&lt;style&gt;
.left-panel-nodes_degree-user {
  color: #777;
  width: 48%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-nodes_degree-user {
  width: 50%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-nodes_degree-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

class: split-40
count: false
 

.left-panel-edge_betweenness-user[

```r
# Estimate edges centrality betweenness
*net &lt;- net %&gt;%
* activate("edges")
```
]
 
.right-panel-edge_betweenness-user[

]

---
class: split-40
count: false
 

.left-panel-edge_betweenness-user[

```r
# Estimate edges centrality betweenness
net &lt;- net %&gt;%  
  activate("edges") %&gt;%  
* mutate(
*   lengths = st_length(.),
*   betweenness = centrality_edge_betweenness(lengths)
*   )
```
]
 
.right-panel-edge_betweenness-user[

]

---
class: split-40
count: false
 

.left-panel-edge_betweenness-user[

```r
# Estimate edges centrality betweenness
net &lt;- net %&gt;%  
  activate("edges") %&gt;%  
  mutate(  
    lengths = st_length(.),  
    betweenness = centrality_edge_betweenness(lengths)  
    )  

# Plot with tmap. We need to escape the nodes and
# edges dimension and rebuild the sf structure.
*tm_shape(net %&gt;% activate("edges") %&gt;% st_as_sf()) +
* tm_lines(
*   n = 8,
*   scale = 2,
*   col = "betweenness",
*   palette = "viridis",
*   legend.col.show = FALSE
*   ) +
*tm_shape(net %&gt;% activate("nodes") %&gt;% st_as_sf()) +
* tm_dots(size = 0.1)
```
]
 
.right-panel-edge_betweenness-user[
&lt;img src="slides_files/figure-html/edge_betweenness_user_3_output-1.png" width="432" /&gt;
]

&lt;style&gt;
.left-panel-edge_betweenness-user {
  color: #777;
  width: 48%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-edge_betweenness-user {
  width: 50%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-edge_betweenness-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

### Extracting the Adjacency Matrix of the edges

We can use `igraph` and `make_line_graph`! The `line graph` of a network object is obtained by inverting the nodes with the edges. We can apply this powerful idea to extract and visualize the `first-order binary adjacency matrix of the edges`. This type of matrix is used by a CAR or BYM spatial model. 



---

class: split-50
count: false
 
###First order binary adjacency
.left-panel-line_graph-user[

```r
# Create the line graph
*net_line_graph &lt;- make_line_graph(net)
```
]
 
.right-panel-line_graph-user[

]

---
class: split-50
count: false
 
###First order binary adjacency
.left-panel-line_graph-user[

```r
# Create the line graph
net_line_graph &lt;- make_line_graph(net)  

# Extract the first order binary adjacency matrix
*first_order_binary_adjacency &lt;- net_line_graph %&gt;%
* as_adjacency_matrix()
```
]
 
.right-panel-line_graph-user[

]

---
class: split-50
count: false
 
###First order binary adjacency
.left-panel-line_graph-user[

```r
# Create the line graph
net_line_graph &lt;- make_line_graph(net)  

# Extract the first order binary adjacency matrix
first_order_binary_adjacency &lt;- net_line_graph %&gt;%  
  as_adjacency_matrix()  

*image(
* first_order_binary_adjacency[sample(1:851), ],
* xlab = list(label = "Columns", cex = 3),
* ylab = list(label = "Row", cex = 3),
* scales = list(cex = 3),
* sub = ""
* )
```
]
 
.right-panel-line_graph-user[
&lt;img src="slides_files/figure-html/line_graph_user_3_output-1.png" width="432" /&gt;
]

&lt;style&gt;
.left-panel-line_graph-user {
  color: #777;
  width: 60%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-line_graph-user {
  width: 35%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-line_graph-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

class: split-50
count: false
 
###Second order binary adjacency
.left-panel-line_graph2-user[

```r
# Similar idea for second order binary adjacency
*ego2_net &lt;- ego(net_line_graph, 2)
```
]
 
.right-panel-line_graph2-user[

]

---
class: split-50
count: false
 
###Second order binary adjacency
.left-panel-line_graph2-user[

```r
# Similar idea for second order binary adjacency
ego2_net &lt;- ego(net_line_graph, 2)  

*second_order_binary_adjacency &lt;- ego2_net %&gt;%
* graph_from_adj_list() %&gt;%
* as_adjacency_matrix()
```
]
 
.right-panel-line_graph2-user[

]

---
class: split-50
count: false
 
###Second order binary adjacency
.left-panel-line_graph2-user[

```r
# Similar idea for second order binary adjacency
ego2_net &lt;- ego(net_line_graph, 2)  

second_order_binary_adjacency &lt;- ego2_net %&gt;%  
  graph_from_adj_list() %&gt;%  
  as_adjacency_matrix()  

*image(
* second_order_binary_adjacency[sample(1:851), ],
* xlab = list(label = "Columns", cex = 3),
* ylab = list(label = "Row", cex = 3),
* scales = list(cex = 3),
* sub = ""
* )
```
]
 
.right-panel-line_graph2-user[
&lt;img src="slides_files/figure-html/line_graph2_user_3_output-1.png" width="432" /&gt;
]

&lt;style&gt;
.left-panel-line_graph2-user {
  color: #777;
  width: 55%;
  height: 92%;
  float: left;
  font-size: 80%
}
.right-panel-line_graph2-user {
  width: 42%;
  float: right;
  padding-left: 1%;
  font-size: 80%
}
.middle-panel-line_graph2-user {
  width: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;






---
class: center, middle

### Thank you for you interest!

#### Questions?

.note[Slides powered by [xaringan](https://github.com/yihui/xaringan), [xaringanthemer](https://github.com/gadenbuie/xaringanthemer) and [flipbookr](https://github.com/EvaMaeRey/flipbookr)]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script src="macro.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
